import{j as e,$ as w,G as m,B as F,F as M}from"./chakra-uWiumq66.js";import{u as O,M as b,V as k,W as f,L as E}from"./index-xfkg7BKV.js";import{l as v,r as y}from"./react-CVMQYbqF.js";import{P,R as C,M as S,e as R,f as W,g as N,h as U,d as G}from"./pantone-input-SpKFsG0C.js";function L(){const{i18n:c}=v();return n=>{var s,a;return(a=(s=c.languages.map(i=>n[i]).find(i=>i!==void 0))!=null?s:n.en)!=null?a:"(Translation Error)"}}function I(c){var l;const{lineDetail:n,onUpdate:s}=c,{t:a}=v(),{pantoneReady:i}=O(t=>t.app),[r,h]=y.useState(!!n.pantone),g=[{label:a("Yes"),value:!0},{label:a("No"),value:!1}],p=[{label:a("Black"),value:b.black},{label:a("White"),value:b.white}],u=[{type:"input",label:a("Line code"),placeholder:"e.g. twl, gz1, sh1",value:n.id,onChange:t=>s({id:t}),validator:t=>t!==""&&!t.match(/[^a-z0-9]/)},{type:"input",label:a("Background colour"),variant:r?"text":"color",value:n.colour,onChange:t=>s({colour:t}),isDisabled:i&&r},{type:"custom",label:a("Use Pantone®"),component:e.jsx(k,{selections:g,defaultValue:r,onChange:t=>h(t)}),hidden:!i},{type:"custom",label:a("Pantone® code"),component:e.jsx(P,{value:(l=n.pantone)!=null?l:"",onChange:(t,o)=>s({pantone:t,colour:o})}),hidden:!i||!r},{type:"custom",label:a("Foreground colour"),component:e.jsx(k,{selections:p,defaultValue:n.fg,onChange:t=>s({fg:t})})}];return e.jsx(C,{fields:u})}const T={"& > div:first-of-type":{flex:1}},D=c=>{var u;const{onUpdate:n,onLangSwitch:s,onRemove:a}=c,i=(u=c.entries)!=null?u:[],{t:r}=v(),h=L(),g=(l,t)=>[{type:"select",label:r("Language"),value:l,options:Object.entries(E).reduce((o,x)=>({...o,[x[0]]:h(x[1])}),{}),disabledOptions:i.filter(o=>o[0]!==l).map(o=>o[0]),onChange:o=>s(l,o)},{type:"input",label:r("Name"),value:t,onChange:o=>n(l,o),validator:o=>!!o}],p=()=>{const l=Object.keys(E).filter(t=>!i.find(o=>o[0]===t))[0];n(l,"")};return e.jsx(e.Fragment,{children:i.map(([l,t],o,x)=>e.jsxs(w,{sx:T,"data-testid":"entry-card-stack-"+l,children:[e.jsx(C,{fields:g(l,t),noLabel:o>0}),o===x.length-1?e.jsx(m,{size:"sm",variant:"ghost","aria-label":r("Add a name in another language"),title:r("Add a name in another language"),onClick:p,icon:e.jsx(S,{})}):e.jsx(F,{minW:8}),x.length>1&&e.jsx(m,{size:"sm",variant:"ghost","aria-label":r("Remove this name"),title:r("Remove this name"),onClick:()=>a(l),icon:e.jsx(R,{})})]},o))})};function $(c){return e.jsx(f,{direction:"column",children:e.jsx(D,{...c})})}function V(c){const{lineDetail:n}=c,{t:s}=v(),a=[{type:"output",label:s("Line code"),value:n.id},{type:"output",label:s("Background colour"),value:n.colour},{type:"output",label:s("Pantone® code"),value:n.pantone,hidden:!n.pantone},{type:"output",label:s("Foreground colour"),value:n.fg===b.black?s("Black"):s("White")}];return e.jsx(C,{fields:a})}function q(c){const{lineDetail:n,editable:s,onUpdate:a,onMoveUp:i,onMoveDown:r,onCopy:h,onRemove:g,onNameUpdate:p,onLangSwitch:u,onNameRemove:l}=c,{t}=v(),o=L(),[x,z]=y.useState(!1),A=y.useMemo(()=>({bg:n.colour,m:-1,w:"calc(100% + var(--chakra-space-1) * 2)",px:2,"&, button":{color:n.fg},"& > div:first-of-type":{overflow:"hidden",textWrap:"nowrap",textOverflow:"ellipsis"},"& > div:nth-of-type(2)":{ml:"auto"}}),[n.colour,n.fg]),B=o(Object.fromEntries(n.nameEntity));return e.jsxs(f,{direction:"column",sx:{pb:0},children:[e.jsxs(f,{sx:A,children:[e.jsx("div",{children:B}),s&&e.jsxs(w,{spacing:.5,children:[e.jsx(m,{size:"xs",variant:"ghost","aria-label":t("Move up"),title:t("Move up"),icon:e.jsx(W,{}),onClick:i}),e.jsx(m,{size:"xs",variant:"ghost","aria-label":t("Move down"),title:t("Move down"),icon:e.jsx(N,{}),onClick:r}),e.jsx(m,{size:"xs",variant:"ghost","aria-label":t("Edit"),title:t("Edit"),icon:e.jsx(U,{}),onClick:()=>z(d=>!d)}),e.jsx(m,{size:"xs",variant:"ghost","aria-label":t("Duplicate"),title:t("Duplicate"),icon:e.jsx(G,{}),onClick:h}),e.jsx(m,{size:"xs",variant:"ghost","aria-label":t("Remove"),title:t("Remove"),icon:e.jsx(R,{}),onClick:g})]})]}),x&&e.jsxs(M,{direction:"column",position:"relative",my:1,children:[e.jsx(I,{lineDetail:n,onUpdate:d=>a==null?void 0:a(d)}),e.jsx(D,{entries:n.nameEntity,onUpdate:(d,j)=>p==null?void 0:p(d,j),onLangSwitch:(d,j)=>u==null?void 0:u(d,j),onRemove:d=>l==null?void 0:l(d)})]}),!s&&e.jsx(M,{direction:"column",my:1,children:e.jsx(V,{lineDetail:n})})]})}export{q as L,$ as M,L as u};
