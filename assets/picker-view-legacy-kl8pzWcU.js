System.register(["./chakra-legacy-vtnVmaLc.js","./index-legacy-4zKMc443.js","./react-legacy-l6OxjFzU.js","./use-palette-legacy-3TJsFe-4.js","./index.esm-legacy-c4exRJL9.js"],(function(e,n){"use strict";var t,a,o,l,s,i,r,c,d,u,p,m,g,h,f,v,x,C,j,y,E,S,b,A,I,L,P,_;return{setters:[e=>{t=e.j,a=e.F,o=e._,l=e.f,s=e.a7,i=e.a8,r=e.G,c=e.a1,d=e.$},e=>{u=e.a,p=e.Z,m=e.M,g=e.b,h=e.X,f=e.n,v=e.c,x=e.r,C=e.E,j=e.h,y=e.i,E=e._,S=e.$},e=>{b=e.u,A=e.r,I=e.n},e=>{L=e.u},e=>{P=e.R,_=e.i}],execute:function(){e("default",(function(){const[e]=I(),n=e.get("parentId"),a=e.get("parentComponent"),o=v(),{isDataLoading:l}=u((e=>e.app)),[s,i]=A.useState(),[r,c]=A.useState(),d=A.useRef();return A.useEffect((()=>{const e=new BroadcastChannel(F+n);return d.current=e,x.event(C.APP_CLIP_VIEW_OPENED,{parentComponent:a}),e.onmessage=n=>{const{event:t,data:a}=n.data;console.log(`[${e.name}] Received event from parent component:`,t),"OPEN"===t&&(i(crypto.randomUUID()),c(a))},console.log(`[${e.name}] App clip connection established, parentComponent=${a}`),e.postMessage({event:"LOADED"}),()=>{e.close()}}),[]),t.jsxs(j,{children:[l&&t.jsx(y,{isIndeterminate:!0}),t.jsx(D,{defaultTheme:r,sessionId:s,onSubmit:(e,n)=>{var t,l;console.log(`[${null===(t=d.current)||void 0===t?void 0:t.name}] Emitting SELECT event, theme:`,e),null===(l=d.current)||void 0===l||l.postMessage({event:"SELECT",data:e}),o(E({theme:e,displayName:n})),x.event(C.APP_CLIP_VIEW_SELECT,{parentComponent:a,theme:e})},onClose:()=>{var e,n;console.log(`[${null===(e=d.current)||void 0===e?void 0:e.name}] Emitting CLOSE event`),null===(n=d.current)||void 0===n||n.postMessage({event:"CLOSE"}),x.event(C.APP_CLIP_VIEW_CLOSED,{parentComponent:a})},onClearHistory:()=>{o(S()),x.event(C.CLEAR_HISTORY,{})}})]})}));const n=e=>{const n=(e=>{const n=e.toUpperCase().split("");return 2===n.length?n.map((e=>((e.codePointAt(0)||0)+127397).toString(16).toUpperCase())):5===n.length?["1F3F4",...n.map((e=>((e.codePointAt(0)||0)+917536).toString(16).toUpperCase())),"E007F"]:[]})(e);return String.fromCodePoint(...n.map((e=>parseInt(e,16))))};function V(e){const{defaultValueId:a,onChange:o}=e,{i18n:l}=b(),{cityList:s}=u((e=>e.app)),i=a?s.find((e=>e.id===a)):void 0,r=e=>{var n,t;return null!==(n=null!==(t=l.languages.map((n=>e.name[n])).find((e=>void 0!==e)))&&void 0!==t?t:e.name.en)&&void 0!==n?n:""},c=s.slice().sort(((e,n)=>"other"===e.id?1:"other"===n.id?-1:r(e).localeCompare(r(n),l.languages[0])));return t.jsx(p,{data:c,displayValue:r,displayHandler:e=>{const a="TW"===e.country&&["zh-Hans","zh-CN"].includes(l.languages[0]),o=l.languages.map((n=>e.name[n])).find((e=>void 0!==e));return t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"flag-emoji",children:a?"🏴":n(e.country)}),t.jsx("span",{children:o})]})},predicate:(e,n)=>Object.values(e.name).some((e=>e.toLowerCase().includes(n.toLowerCase()))),defaultValue:i,onChange:e=>null==o?void 0:o(e.id)})}function w(e){const{city:n,defaultValueId:a,onChange:o}=e,{i18n:l}=b(),s=L(n),i=a?s.find((e=>e.id===a)):void 0,r=e=>{var n;return null!==(n=l.languages.map((n=>e.name[n])).find((e=>void 0!==e)))&&void 0!==n?n:""};return t.jsx(p,{data:s,displayValue:r,displayHandler:e=>{const n=r(e);return t.jsx(g,{name:n,fg:e.fg||m.white,bg:e.colour})},predicate:(e,n)=>Object.values(e.name).some((e=>e.includes(n))),defaultValue:i,onChange:e=>null==o?void 0:o(e.id,e.colour,e.fg||m.white)})}const $=e=>!!e.match(/^#[0-9a-fA-F]{6}$/),k={flexDirection:"column",flex:1,mx:2,overflowX:"hidden",overflowY:"scroll","& .chakra-badge":{fontSize:"1em",width:"fit-content",alignSelf:"center",m:1},"& > section:first-of-type":{p:1},"& > section:last-of-type":{w:"100%","& > div:last-of-type":{px:2},"& .rmg-section__header button":{ml:"auto"}}};function D(e){const{defaultTheme:n,sessionId:p,onSubmit:v,onClose:x,onClearHistory:C}=e,{t:j}=b(),{recentlyUsed:y}=u((e=>e.app)),[E,S]=A.useState(null==n?void 0:n[0]),[I,L]=A.useState(null==n?void 0:n[1]),[D,F]=A.useState((null==n?void 0:n[2])||"#AAAAAA"),[O,z]=A.useState((null==n?void 0:n[3])||m.white),[T,H]=A.useState("color");A.useEffect((()=>{p&&n&&(S(n[0]),L(n[1]),F(n[2]),z(n[3]))}),[p,null==n?void 0:n.toString()]);const N=[{label:j("Select"),value:"color"},{label:j("Key in"),value:"text"}],R=[{label:j("Black"),value:m.black},{label:j("White"),value:m.white}],U=[{type:"custom",label:j("City"),component:t.jsx(V,{defaultValueId:E,onChange:e=>{S(e),L(void 0),F("#AAAAAA"),z(m.white)}})},{type:"custom",label:j("Line"),component:t.jsx(w,{city:E,defaultValueId:I,onChange:(e,n,t)=>{L(e),F(n),z(t)}})}],W=[{type:"custom",label:j("Input mode"),component:t.jsx(h,{selections:N,defaultValue:T,onChange:e=>H(e)})},{type:"input",label:j("Background colour"),variant:T,value:D,placeholder:"#F3D03E",validator:$,onChange:e=>{S("other"),L("other"),F(e)}},{type:"custom",label:j("Foreground colour"),component:t.jsx(h,{selections:R,defaultValue:O,onChange:e=>{S("other"),L("other"),z(e)}})}],M=E&&I&&D&&O&&$(D);return t.jsxs(t.Fragment,{children:[t.jsxs(a,{sx:k,children:[t.jsx(g,{name:j("Example"),fg:O,bg:D}),t.jsxs("section",{children:[t.jsx(P,{fields:U}),t.jsx(P,{fields:W})]}),t.jsxs("section",{children:[t.jsxs(f,{children:[t.jsx(o,{as:"h5",size:"xs",children:j("Recently used")}),t.jsx(l,{variant:"ghost",size:"xs",onClick:C,children:j("Clear")})]}),t.jsx(s,{children:y.map((({theme:e,displayName:n})=>t.jsx(i,{children:t.jsx(r,{size:"xs","aria-label":j("Apply"),title:n,mt:"0.45px",color:e[3],bg:e[2],icon:t.jsx(_,{}),onClick:()=>(e=>{S(e[0]),L(e[1]),F(e[2]),z(e[3])})(e)})},e.join("-"))))})]})]}),t.jsx(c,{}),t.jsxs(d,{p:2,justifyContent:"flex-end",children:[t.jsx(l,{size:"sm",onClick:x,children:j("Cancel")}),t.jsx(l,{size:"sm",colorScheme:"primary",onClick:()=>{M&&(null==v||v([E,I,D,O],`${E} - ${I}`))},isDisabled:!M,children:j("Confirm")})]})]})}const F="rmg-palette-bridge--"}}}));
