import{j as e,$ as z,G as x,B as O,F as R}from"./chakra-uWiumq66.js";import{u as F,M as k,W as L,h as P,X as M,L as D}from"./index-ljWXnY46.js";import{l as b,r as h,a as I}from"./react-CVMQYbqF.js";import{R as w,M as N,e as S,f as U,g as G,h as T,d as W}from"./index.esm-ckfON_Td.js";function A(){const{i18n:i}=b();return n=>{var l,o;return(o=(l=i.languages.map(c=>n[c]).find(c=>c!==void 0))!=null?l:n.en)!=null?o:"(Translation Error)"}}const q=i=>'{ getColor(code:"'.concat(i,'") { code, rgb { r g b }, hex, cmyk { c m y k } } }'),K=async(i,n)=>"#"+(await(await fetch("https://4n6dg5ccsfct3lzfssu34boemq.appsync-api.us-east-1.amazonaws.com/graphql",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":"da2-sa3lsp2tkzhj3c2ysxbdprl73e"},body:JSON.stringify({query:q(i)}),signal:n})).json()).data.getColor.hex;function V(i){var j;const{lineDetail:n,onUpdate:l}=i,{t:o}=b(),{pantoneReady:c}=F(t=>t.app),[d,f]=h.useState(!!n.pantone),[y,u]=h.useState((j=n.pantone)!=null?j:""),[g,r]=h.useState(!1),a=h.useRef(new AbortController);h.useEffect(()=>()=>{var t;(t=a.current)==null||t.abort()},[]);const s=async t=>{var m;if(a.current.abort(),!!c){a.current=new AbortController,r(!0);try{const E=await K(t,a.current.signal);l({pantone:t,colour:E}),u(t)}catch(E){I.flushSync(()=>{u(t)}),u((m=n.pantone)!=null?m:"")}finally{r(!1)}}},p=[{label:o("Yes"),value:!0},{label:o("No"),value:!1}],v=[{label:o("Black"),value:k.black},{label:o("White"),value:k.white}],C=[{type:"input",label:o("Line code"),placeholder:"e.g. twl, gz1, sh1",value:n.id,onChange:t=>l({id:t}),validator:t=>t!==""&&!t.match(/[^a-z0-9]/)},{type:"input",label:o("Background colour"),variant:d?"text":"color",value:n.colour,onChange:t=>l({colour:t}),isDisabled:c&&d},{type:"custom",label:o("Use Pantone"),component:e.jsx(L,{selections:p,defaultValue:d,onChange:t=>f(t)}),hidden:!c},{type:"input",label:o("Pantone code"),value:y,onChange:s,debouncedDelay:1500,hidden:!c||!d},{type:"custom",label:o("Foreground colour"),component:e.jsx(L,{selections:v,defaultValue:n.fg,onChange:t=>l({fg:t})})}];return e.jsxs(e.Fragment,{children:[g&&e.jsx(P,{isIndeterminate:!0}),e.jsx(w,{fields:C})]})}const $={"& > div:first-of-type":{flex:1}},B=i=>{var g;const{onUpdate:n,onLangSwitch:l,onRemove:o}=i,c=(g=i.entries)!=null?g:[],{t:d}=b(),f=A(),y=(r,a)=>[{type:"select",label:d("Language"),value:r,options:Object.entries(D).reduce((s,p)=>({...s,[p[0]]:f(p[1])}),{}),disabledOptions:c.filter(s=>s[0]!==r).map(s=>s[0]),onChange:s=>l(r,s)},{type:"input",label:d("Name"),value:a,onChange:s=>n(r,s),validator:s=>!!s}],u=()=>{const r=Object.keys(D).filter(a=>!c.find(s=>s[0]===a))[0];n(r,"")};return e.jsx(e.Fragment,{children:c.map(([r,a],s,p)=>e.jsxs(z,{sx:$,"data-testid":"entry-card-stack-"+r,children:[e.jsx(w,{fields:y(r,a),noLabel:s>0}),s===p.length-1?e.jsx(x,{size:"sm",variant:"ghost","aria-label":d("Add a name in another language"),title:d("Add a name in another language"),onClick:u,icon:e.jsx(N,{})}):e.jsx(O,{minW:8}),p.length>1&&e.jsx(x,{size:"sm",variant:"ghost","aria-label":d("Remove this name"),title:d("Remove this name"),onClick:()=>o(r),icon:e.jsx(S,{})})]},s))})};function _(i){return e.jsx(M,{direction:"column",children:e.jsx(B,{...i})})}function H(i){const{lineDetail:n}=i,{t:l}=b(),o=[{type:"output",label:l("Line code"),value:n.id},{type:"output",label:l("Background colour"),value:n.colour},{type:"output",label:l("Pantone code"),value:n.pantone,hidden:!n.pantone},{type:"output",label:l("Foreground colour"),value:n.fg===k.black?l("Black"):l("White")}];return e.jsx(w,{fields:o})}function Z(i){const{lineDetail:n,editable:l,onUpdate:o,onMoveUp:c,onMoveDown:d,onCopy:f,onRemove:y,onNameUpdate:u,onLangSwitch:g,onNameRemove:r}=i,{t:a}=b(),s=A(),[p,v]=h.useState(!1),C=h.useMemo(()=>({bg:n.colour,m:-1,w:"calc(100% + var(--chakra-space-1) * 2)",px:2,"&, button":{color:n.fg},"& > div:first-of-type":{overflow:"hidden",textWrap:"nowrap",textOverflow:"ellipsis"},"& > div:nth-of-type(2)":{ml:"auto"}}),[n.colour,n.fg]),j=s(Object.fromEntries(n.nameEntity));return e.jsxs(M,{direction:"column",sx:{pb:0},children:[e.jsxs(M,{sx:C,children:[e.jsx("div",{children:j}),l&&e.jsxs(z,{spacing:.5,children:[e.jsx(x,{size:"xs",variant:"ghost","aria-label":a("Move up"),title:a("Move up"),icon:e.jsx(U,{}),onClick:c}),e.jsx(x,{size:"xs",variant:"ghost","aria-label":a("Move down"),title:a("Move down"),icon:e.jsx(G,{}),onClick:d}),e.jsx(x,{size:"xs",variant:"ghost","aria-label":a("Edit"),title:a("Edit"),icon:e.jsx(T,{}),onClick:()=>v(t=>!t)}),e.jsx(x,{size:"xs",variant:"ghost","aria-label":a("Duplicate"),title:a("Duplicate"),icon:e.jsx(W,{}),onClick:f}),e.jsx(x,{size:"xs",variant:"ghost","aria-label":a("Remove"),title:a("Remove"),icon:e.jsx(S,{}),onClick:y})]})]}),p&&e.jsxs(R,{direction:"column",position:"relative",my:1,children:[e.jsx(V,{lineDetail:n,onUpdate:t=>o==null?void 0:o(t)}),e.jsx(B,{entries:n.nameEntity,onUpdate:(t,m)=>u==null?void 0:u(t,m),onLangSwitch:(t,m)=>g==null?void 0:g(t,m),onRemove:t=>r==null?void 0:r(t)})]}),!l&&e.jsx(R,{direction:"column",my:1,children:e.jsx(H,{lineDetail:n})})]})}export{Z as L,_ as M,K as g,A as u};
