System.register(["./chakra-legacy-0hWQw7Oq.js","./index-legacy-h6Vpr5uZ.js","./react-legacy-KN5lAqTZ.js","./pantone-input-legacy-BWkIDTRh.js","./line-detail-card-legacy-kU1XObem.js","./ag-grid-react-legacy-M7IuPEtm.js","./use-palette-legacy-V7OWPfge.js","./ag-grid-community-legacy-4nDRcaTd.js"],(function(e,t){"use strict";var a,n,l,i,s,r,o,c,d,u,p,g,m,h,f,j,x,y,v,C,w,b,R,D,A,k,L,S,E,I,T,z;return{setters:[e=>{a=e.Y,n=e.h,l=e.j,i=e.B,s=e.$,r=e.f,o=e.a0,c=e.a1,d=e.F},e=>{u=e.u,p=e.s,g=e.R,m=e.r,h=e.E,f=e.a,j=e.M,x=e.b,y=e.c,v=e.d,C=e.e,w=e.f,b=e.g,R=e.h},e=>{D=e.l,A=e.u,k=e.o,L=e.r},e=>{S=e.R},e=>{E=e.u,I=e.L},e=>{T=e.m},e=>{z=e.u},null],execute:function(){e("default",(function(){const{isDataLoading:e}=u((e=>e.app));return l.jsxs(b,{children:[e&&l.jsx(R,{isIndeterminate:!0}),l.jsx(M,{}),l.jsxs(d,{flex:1,overflow:"hidden",position:"relative",children:[l.jsx(Y,{}),l.jsx(H,{})]})]})}));var t=function(e){var t=e.children,s=a().colorMode,r=n("RmgAgGrid");return l.jsx(i,{className:"light"===s?"ag-theme-alpine":"ag-theme-alpine-dark",sx:r,children:t})};function M(){const{t:e,i18n:t}=D(),a=E(),n=A(),i=k(),{countryList:o,selectedCountry:c}=u((e=>e.app)),d=o.map((e=>[e.id,a(e.name)])).sort(((e,a)=>e[1].localeCompare(a[1],t.languages[0]))).reduce(((e,t)=>"UN"===t[0]?e:{...e,[t[0]]:t[1]}),{"":e("Please select...")}),f=[{type:"select",label:e("Country/Region"),value:c,options:d,disabledOptions:[""],onChange:e=>n(p(e))}];return l.jsxs(g,{children:[l.jsx(S,{fields:f}),l.jsx(s,{ml:"auto",children:l.jsx(r,{variant:"solid",size:"sm",colorScheme:"primary",onClick:()=>{m.isStandaloneWindow()?i("/new"):m.openApp("rmg-palette-upload"),m.event(h.ADD_CITY,{})},children:e("Add a city")})})]})}function N(e){const{city:t}=e,a=z(t),n=E();return l.jsx(s,{flexWrap:"wrap",sx:{"& .chakra-badge":{mb:1}},children:a.map((e=>l.jsx(f,{name:n(e.name),fg:e.fg||j.white,bg:e.colour},e.id)))})}function Y(){const{t:e,i18n:a}=D(),n=E(),i=x();k();const{cityList:s,selectedCountry:r,sidePanelCity:o}=u((e=>e.app)),c=s.filter((e=>e.country===r)),d=L.useRef(null);L.useEffect((()=>{var e;o||null===(e=d.current)||void 0===e||null===(e=e.api)||void 0===e||e.deselectAll()}),[o]);const p=L.useCallback((({api:e})=>{const t=e.getSelectedRows().map((e=>e.id));1===t.length?i(y(t[0])):i(v())}),[]),g=L.useMemo((()=>[{headerName:e("City"),field:"name",valueFormatter:({value:e})=>n(e),comparator:(e,t)=>n(e).localeCompare(n(t),a.languages[0]),sortable:!0,sort:"asc",wrapText:!0,filter:!0},{headerName:e("Lines"),field:"id",cellRenderer:({value:e})=>l.jsx(N,{city:e}),flex:1,autoHeight:!0,resizable:!1}]),[a.language]),m=L.useMemo((()=>({resizable:!0})),[]);return l.jsx(t,{children:l.jsx(T.AgGridReact,{ref:d,rowData:c,columnDefs:g,defaultColDef:m,getRowId:({data:e})=>e.id,headerHeight:36,rowHeight:36,suppressCellFocus:!0,suppressRowVirtualisation:!0,rowSelection:"single",debug:!1,onSelectionChanged:p})})}const F=410;function H(){var e,t;const{t:a}=D(),n=A(),{sidePanelCity:i,cityList:d}=u((e=>e.app)),p=z(i),g=E()(null!==(e=null===(t=d.find((e=>e.id===i)))||void 0===t?void 0:t.name)&&void 0!==e?e:{});return l.jsxs(C,{isOpen:!!i,width:F,header:"Dummy header",children:[l.jsx(w,{onClose:()=>{n(v())},children:g}),l.jsx(o,{spacing:.5,px:2,flex:1,overflowY:"auto",children:p.map((e=>{var t;const a={...e,nameEntity:Object.entries(e.name),fg:null!==(t=e.fg)&&void 0!==t?t:j.white};return l.jsx(I,{lineDetail:a,editable:!1},e.id)}))}),l.jsx(c,{}),l.jsx(s,{p:1,children:l.jsx(r,{size:"sm",ml:"auto",onClick:async()=>{m.closeApp("rmg-palette-upload"),setTimeout((()=>{m.openApp("rmg-palette-upload","/rmg-palette/#/new?city="+i)}),200),m.event(h.EDIT_CITY,{city:i})},children:a("Edit")})})]})}}}}));
