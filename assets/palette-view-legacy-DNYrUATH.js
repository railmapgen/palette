System.register(["./chakra-legacy-DIk3Fgsa.js","./index-legacy-C8ec9ADN.js","./react-legacy-I-JEPN7p.js","./pantone-input-legacy-B3hQ6VGs.js","./ag-grid-react-legacy-afRvdLAi.js","./use-palette-legacy-D2UbwLHg.js","./line-detail-card-legacy-aw9FahrQ.js","./ag-grid-community-legacy-DFtBhZh4.js"],(function(e,t){"use strict";var a,n,s,i,l,r,c,o,d,u,p,g,m,h,f,x,j,y,C,b,w,v,D,R,A,I,L,k,E,S,T;return{setters:[e=>{a=e.ap,n=e.L,s=e.H,i=e.B,l=e.as,r=e.K,c=e.at,o=e.D,d=e.F},e=>{u=e.u,p=e.s,g=e.R,m=e.r,h=e.E,f=e.a,x=e.M,j=e.b,y=e.c,C=e.d,b=e.e,w=e.f,v=e.g,D=e.h},e=>{R=e.l,A=e.u,I=e.r},e=>{L=e.u,k=e.R},e=>{E=e.A},e=>{S=e.u},e=>{T=e.L},null],execute:function(){e("default",(function(){const{isDataLoading:e}=u((e=>e.app));return s.jsxs(v,{children:[e&&s.jsx(D,{isIndeterminate:!0}),s.jsx(z,{}),s.jsxs(d,{flex:1,overflow:"hidden",position:"relative",children:[s.jsx(M,{}),s.jsx(F,{})]})]})}));var t=function(e){var t=e.children,l=a().colorMode,r=n("RmgAgGrid");return s.jsx(i,{className:"light"===l?"ag-theme-alpine":"ag-theme-alpine-dark",sx:r,children:t})};function z(){const{t:e,i18n:t}=R(),a=L(),n=A(),{countryList:i,selectedCountry:c}=u((e=>e.app)),o=i.map((e=>[e.id,a(e.name)])).sort(((e,a)=>e[1].localeCompare(a[1],t.languages[0]))).reduce(((e,t)=>"UN"===t[0]?e:{...e,[t[0]]:t[1]}),{"":e("Please select...")}),d=[{type:"select",label:e("Country/Region"),value:c,options:o,disabledOptions:[""],onChange:e=>n(p(e))}];return s.jsxs(g,{children:[s.jsx(k,{fields:d}),s.jsx(l,{ml:"auto",children:s.jsx(r,{variant:"solid",size:"sm",colorScheme:"primary",onClick:()=>{m.openApp({appId:"rmg-palette-upload"}),m.event(h.ADD_CITY,{})},children:e("Add a city")})})]})}function H(e){const{city:t}=e,a=S(t),n=L();return s.jsx(l,{flexWrap:"wrap",sx:{"& .chakra-badge":{mb:1}},children:a.map((e=>s.jsx(f,{name:n(e.name),fg:e.fg||x.white,bg:e.colour},e.id)))})}function M(){const{t:e,i18n:a}=R(),n=L(),i=j(),{cityList:l,selectedCountry:r,sidePanelCity:c}=u((e=>e.app)),o=l.filter((e=>e.country===r)),d=I.useRef(null);I.useEffect((()=>{c||d.current?.api?.deselectAll()}),[c]);const p=I.useCallback((({api:e})=>{const t=e.getSelectedRows().map((e=>e.id));1===t.length?i(y(t[0])):i(C())}),[]),g=I.useMemo((()=>[{headerName:e("City"),field:"name",valueFormatter:({value:e})=>n(e),comparator:(e,t)=>n(e).localeCompare(n(t),a.languages[0]),sortable:!0,sort:"asc",wrapText:!0,filter:!0},{headerName:e("Lines"),field:"id",cellRenderer:({value:e})=>s.jsx(H,{city:e}),flex:1,autoHeight:!0,resizable:!1}]),[a.language]),m=I.useMemo((()=>({resizable:!0})),[]);return s.jsx(t,{children:s.jsx(E,{ref:d,rowData:o,columnDefs:g,defaultColDef:m,getRowId:({data:e})=>e.id,headerHeight:36,rowHeight:36,suppressCellFocus:!0,suppressRowVirtualisation:!0,rowSelection:"single",debug:!1,onSelectionChanged:p})})}const N=410;function F(){const{t:e}=R(),t=A(),{sidePanelCity:a,cityList:n}=u((e=>e.app)),i=S(a),d=L()(n.find((e=>e.id===a))?.name??{});return s.jsxs(b,{isOpen:!!a,width:N,header:"Dummy header",children:[s.jsx(w,{onClose:()=>{t(C())},children:d}),s.jsx(c,{spacing:.5,px:2,flex:1,overflowY:"auto",children:i.map((e=>{const t={...e,nameEntity:Object.entries(e.name),fg:e.fg??x.white};return s.jsx(T,{lineDetail:t,editable:!1},e.id)}))}),s.jsx(o,{}),s.jsx(l,{p:1,children:s.jsx(r,{size:"sm",ml:"auto",onClick:async()=>{m.closeApp("rmg-palette-upload"),setTimeout((()=>{m.openApp({appId:"rmg-palette-upload",hash:"/new?city="+a})}),200),m.event(h.EDIT_CITY,{city:a})},children:e("Edit")})})]})}}}}));
