System.register(["./chakra-legacy-0hWQw7Oq.js","./index-legacy-o4jYf0ZD.js","./react-legacy-KN5lAqTZ.js","./use-palette-legacy-SOJb-oZo.js","./pantone-input-legacy-blTzuh6G.js","./pantone-checker-legacy-ibOKz6-O.js"],(function(e,n){"use strict";var t,o,a,l,s,i,r,c,d,u,p,m,h,g,v,f,x,C,j,y,b,S,E,A,I,P,L,_,V,w,k;return{setters:[e=>{t=e.j,o=e.F,a=e._,l=e.f,s=e.a7,i=e.a8,r=e.G,c=e.a1,d=e.$},e=>{u=e.u,p=e.Y,m=e.M,h=e.a,g=e.W,v=e.l,f=e.m,x=e.b,C=e.r,j=e.E,y=e.g,b=e.h,S=e.Z,E=e._},e=>{A=e.l,I=e.r,P=e.p},e=>{L=e.u},e=>{_=e.P,V=e.R,w=e.i},e=>{k=e.P}],execute:function(){e("default",(function(){const[e]=P(),n=e.get("parentId"),o=e.get("parentComponent"),a=x(),{isDataLoading:l}=u((e=>e.app)),[s,i]=I.useState(),[r,c]=I.useState(),d=I.useRef();return I.useEffect((()=>{const e=new BroadcastChannel(R+n);return d.current=e,C.event(j.APP_CLIP_VIEW_OPENED,{parentComponent:o}),e.onmessage=n=>{const{event:t,data:o}=n.data;console.log(`[${e.name}] Received event from parent component:`,t),"OPEN"===t&&(i(crypto.randomUUID()),c(o))},console.log(`[${e.name}] App clip connection established, parentComponent=${o}`),e.postMessage({event:"LOADED"}),()=>{e.close()}}),[]),t.jsxs(y,{children:[l&&t.jsx(b,{isIndeterminate:!0}),t.jsx(z,{defaultTheme:r,sessionId:s,onSubmit:(e,n)=>{var t,l;console.log(`[${null===(t=d.current)||void 0===t?void 0:t.name}] Emitting SELECT event, theme:`,e),null===(l=d.current)||void 0===l||l.postMessage({event:"SELECT",data:e}),a(S({theme:e,displayName:n})),C.event(j.APP_CLIP_VIEW_SELECT,{parentComponent:o,theme:e})},onClose:()=>{var e,n;console.log(`[${null===(e=d.current)||void 0===e?void 0:e.name}] Emitting CLOSE event`),null===(n=d.current)||void 0===n||n.postMessage({event:"CLOSE"}),C.event(j.APP_CLIP_VIEW_CLOSED,{parentComponent:o})},onClearHistory:()=>{a(E()),C.event(j.CLEAR_HISTORY,{})}})]})}));const n=e=>{const n=(e=>{const n=e.toUpperCase().split("");return 2===n.length?n.map((e=>((e.codePointAt(0)||0)+127397).toString(16).toUpperCase())):5===n.length?["1F3F4",...n.map((e=>((e.codePointAt(0)||0)+917536).toString(16).toUpperCase())),"E007F"]:[]})(e);return String.fromCodePoint(...n.map((e=>parseInt(e,16))))};function D(e){const{defaultValueId:o,onChange:a}=e,{i18n:l}=A(),{cityList:s}=u((e=>e.app)),i=o?s.find((e=>e.id===o)):void 0,r=e=>{var n,t;return null!==(n=null!==(t=l.languages.map((n=>e.name[n])).find((e=>void 0!==e)))&&void 0!==t?t:e.name.en)&&void 0!==n?n:""},c=s.slice().sort(((e,n)=>"other"===e.id?1:"other"===n.id?-1:r(e).localeCompare(r(n),l.languages[0])));return t.jsx(p,{data:c,displayValue:r,displayHandler:e=>{const o="TW"===e.country&&["zh-Hans","zh-CN"].includes(l.languages[0]),a=l.languages.map((n=>e.name[n])).find((e=>void 0!==e));return t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"flag-emoji",children:o?"🏴":n(e.country)}),t.jsx("span",{children:a})]})},predicate:(e,n)=>Object.values(e.name).some((e=>e.toLowerCase().includes(n.toLowerCase()))),defaultValue:i,onChange:e=>null==a?void 0:a(e.id)})}function F(e){const{city:n,defaultValueId:o,onChange:a}=e,{i18n:l}=A(),s=L(n),i=o?s.find((e=>e.id===o)):void 0,r=e=>{var n;return null!==(n=l.languages.map((n=>e.name[n])).find((e=>void 0!==e)))&&void 0!==n?n:""};return t.jsx(p,{data:s,displayValue:r,displayHandler:e=>{const n=r(e);return t.jsx(h,{name:n,fg:e.fg||m.white,bg:e.colour})},predicate:(e,n)=>Object.values(e.name).some((e=>e.includes(n))),defaultValue:i,onChange:e=>null==a?void 0:a(e.id,e.colour,e.fg||m.white,e.pantone)})}const O=e=>!!e.match(/^#[0-9a-fA-F]{6}$/),$={flexDirection:"column",flex:1,mx:2,overflowX:"hidden",overflowY:"scroll","& .chakra-badge":{fontSize:"1em",width:"fit-content",alignSelf:"center",m:1},"& > section:first-of-type":{p:1},"& > section:last-of-type":{w:"100%","& > div:last-of-type":{px:2},"& .rmg-section__header button":{ml:"auto"}}};function z(e){const{defaultTheme:n,sessionId:p,onSubmit:x,onClose:C,onClearHistory:j}=e,{t:y}=A(),{recentlyUsed:b,pantoneReady:S}=u((e=>e.app)),[E,P]=I.useState(null==n?void 0:n[0]),[L,z]=I.useState(null==n?void 0:n[1]),[R,T]=I.useState((null==n?void 0:n[2])||"#AAAAAA"),[H,N]=I.useState((null==n?void 0:n[3])||m.white),[U,W]=I.useState(""),[B,M]=I.useState("color"),Y=()=>{W(""),M((e=>"pantone"===e?"color":e))};I.useEffect((()=>{p&&n&&(P(n[0]),z(n[1]),T(n[2]),N(n[3]),Y())}),[p,null==n?void 0:n.toString()]);const G=[{label:y("Select"),value:"color"},{label:y("RGB"),value:"text"},{label:y("Pantone®"),value:"pantone",disabled:!S}],X=[{label:y("Black"),value:m.black},{label:y("White"),value:m.white}],Z=[{type:"custom",label:y("City"),component:t.jsx(D,{defaultValueId:E,onChange:e=>{P(e),z(void 0),T("#AAAAAA"),N(m.white)}})},{type:"custom",label:y("Line"),component:t.jsx(F,{city:E,defaultValueId:L,onChange:(e,n,t,o)=>{z(e),T(n),N(t),o&&W(o)}})}],q=[{type:"custom",label:y("Input mode"),component:t.jsx(g,{selections:G,defaultValue:B,onChange:e=>M(e)})},{type:"custom",label:y("Pantone® code"),component:t.jsx(_,{value:U,onChange:(e,n)=>{P("other"),z("other"),T(n),W(e)}}),hidden:"pantone"!==B},{type:"input",label:y("Background colour"),variant:"pantone"===B?"color":B,value:R,placeholder:"#F3D03E",validator:O,onChange:e=>{P("other"),z("other"),T(e),Y()},isDisabled:"pantone"===B},{type:"custom",label:y("Foreground colour"),component:t.jsx(g,{selections:X,defaultValue:H,onChange:e=>{P("other"),z("other"),N(e)}})}],J=E&&L&&R&&H&&O(R);return t.jsxs(t.Fragment,{children:[t.jsxs(o,{sx:$,children:[t.jsx(h,{name:y("Example"),fg:H,bg:R}),t.jsxs(v,{children:[t.jsx(k,{hidden:!0}),t.jsx(V,{fields:Z}),t.jsx(V,{fields:q})]}),t.jsxs("section",{children:[t.jsxs(f,{children:[t.jsx(a,{as:"h5",size:"xs",children:y("Recently used")}),t.jsx(l,{variant:"ghost",size:"xs",onClick:j,children:y("Clear")})]}),t.jsx(s,{children:b.map((({theme:e,displayName:n})=>t.jsx(i,{children:t.jsx(r,{size:"xs","aria-label":y("Apply"),title:n,mt:"0.45px",color:e[3],bg:e[2],icon:t.jsx(w,{}),onClick:()=>(e=>{P(e[0]),z(e[1]),T(e[2]),N(e[3]),Y()})(e)})},e.join("-"))))})]})]}),t.jsx(c,{}),t.jsxs(d,{p:2,justifyContent:"flex-end",children:[t.jsx(l,{size:"sm",onClick:C,children:y("Cancel")}),t.jsx(l,{size:"sm",colorScheme:"primary",onClick:()=>{J&&(null==x||x([E,L,R,H],`${E} - ${L}`))},isDisabled:!J,children:y("Confirm")})]})]})}const R="rmg-palette-bridge--"}}}));
