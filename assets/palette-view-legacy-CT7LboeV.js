System.register(["./chakra-legacy-BOtnEfeP.js","./index-legacy-CqcOVVUu.js","./react-legacy-CIVklJVK.js","./pantone-input-legacy-2kMIkcXt.js","./ag-grid-react-legacy-BX2CJlhZ.js","./use-palette-legacy-B3qPNqbt.js","./ag-grid-community-legacy-CFNcmYm4.js","./line-detail-card-legacy-CinelM8A.js"],(function(e,t){"use strict";var a,n,s,i,l,r,c,o,d,u,p,g,m,h,x,f,j,y,C,b,w,v,D,R,k,A,I,L,M,S,E,T,z,N;return{setters:[e=>{a=e.aa,n=e.q,s=e.j,i=e.B,l=e.ad,r=e.p,c=e.ae,o=e.D,d=e.F},e=>{u=e.u,p=e.s,g=e.R,m=e.r,h=e.E,x=e.a,f=e.M,j=e.b,y=e.c,C=e.d,b=e.e,w=e.f,v=e.g,D=e.h},e=>{R=e.n,k=e.u,A=e.a},e=>{I=e.u,L=e.R},e=>{M=e.A},e=>{S=e.u},e=>{E=e.M,T=e.v,z=e.w},e=>{N=e.L}],execute:function(){e("default",(function(){const{isDataLoading:e}=u((e=>e.app));return s.jsxs(v,{children:[e&&s.jsx(D,{isIndeterminate:!0}),s.jsx(F,{}),s.jsxs(d,{flex:1,overflow:"hidden",position:"relative",children:[s.jsx(P,{}),s.jsx(_,{})]})]})}));var t=function(e){var t=e.children,l=a().colorMode,r=n("RmgAgGrid");return s.jsx(i,{className:"light"===l?"ag-theme-alpine":"ag-theme-alpine-dark",sx:r,children:t})};function F(){const{t:e,i18n:t}=R(),a=I(),n=k(),{countryList:i,selectedCountry:c}=u((e=>e.app)),o=i.map((e=>[e.id,a(e.name)])).sort(((e,a)=>e[1].localeCompare(a[1],t.languages[0]))).reduce(((e,t)=>"UN"===t[0]?e:{...e,[t[0]]:t[1]}),{"":e("Please select...")}),d=[{type:"select",label:e("Country/Region"),value:c,options:o,disabledOptions:[""],onChange:e=>n(p(e))}];return s.jsxs(g,{children:[s.jsx(L,{fields:d}),s.jsx(l,{ml:"auto",children:s.jsx(r,{variant:"solid",size:"sm",colorScheme:"primary",onClick:()=>{m.openApp({appId:"rmg-palette-upload"}),m.event(h.ADD_CITY,{})},children:e("Add a city")})})]})}function H(e){const{city:t}=e,a=S(t),n=I();return s.jsx(l,{flexWrap:"wrap",sx:{"& .chakra-badge":{mb:1}},children:a.map((e=>s.jsx(x,{name:n(e.name),fg:e.fg||f.white,bg:e.colour},e.id)))})}E.registerModules([T]),z({theme:"legacy"});const O={mode:"singleRow",checkboxes:!1,enableClickSelection:!0};function P(){const{t:e,i18n:a}=R(),n=I(),i=j(),{cityList:l,selectedCountry:r,sidePanelCity:c}=u((e=>e.app)),o=l.filter((e=>e.country===r)),d=A.useRef(null);A.useEffect((()=>{c||d.current?.api?.deselectAll()}),[c]);const p=A.useCallback((({api:e})=>{const t=e.getSelectedRows().map((e=>e.id));1===t.length?i(y(t[0])):i(C())}),[]),g=A.useMemo((()=>[{headerName:e("City"),field:"name",valueFormatter:({value:e})=>n(e),comparator:(e,t)=>n(e).localeCompare(n(t),a.languages[0]),sortable:!0,sort:"asc",wrapText:!0,filter:!0},{headerName:e("Lines"),field:"id",cellRenderer:({value:e})=>s.jsx(H,{city:e}),flex:1,autoHeight:!0,resizable:!1}]),[a.language]),m=A.useMemo((()=>({resizable:!0})),[]);return s.jsx(t,{children:s.jsx(M,{ref:d,rowData:o,columnDefs:g,defaultColDef:m,getRowId:({data:e})=>e.id,headerHeight:36,rowHeight:36,suppressCellFocus:!0,suppressRowVirtualisation:!0,rowSelection:O,debug:!1,onSelectionChanged:p})})}const Y=410;function _(){const{t:e}=R(),t=k(),{sidePanelCity:a,cityList:n}=u((e=>e.app)),i=S(a),d=I()(n.find((e=>e.id===a))?.name??{});return s.jsxs(b,{isOpen:!!a,width:Y,header:"Dummy header",children:[s.jsx(w,{onClose:()=>{t(C())},children:d}),s.jsx(c,{spacing:.5,px:2,flex:1,overflowY:"auto",children:i.map((e=>{const t={...e,nameEntity:Object.entries(e.name),fg:e.fg??f.white};return s.jsx(N,{lineDetail:t,editable:!1},e.id)}))}),s.jsx(o,{}),s.jsx(l,{p:1,children:s.jsx(r,{size:"sm",ml:"auto",onClick:async()=>{m.closeApp("rmg-palette-upload"),setTimeout((()=>{m.openApp({appId:"rmg-palette-upload",hash:"/new?city="+a})}),200),m.event(h.EDIT_CITY,{city:a})},children:e("Edit")})})]})}}}}));
