System.register(["./chakra-legacy-vtnVmaLc.js","./index-legacy-4zKMc443.js","./react-legacy-l6OxjFzU.js","./index.esm-legacy-c4exRJL9.js","./line-detail-card-legacy-xdkRPuS1.js","./ag-grid-legacy-HhQdl0Iu.js","./use-palette-legacy-3TJsFe-4.js"],(function(e,t){"use strict";var a,n,i,l,s,r,o,c,d,u,p,g,m,h,f,x,j,y,v,C,w,b,R,D,A,k,L,S,E,I,T,z;return{setters:[e=>{a=e.Y,n=e.h,i=e.j,l=e.B,s=e.$,r=e.f,o=e.a0,c=e.a1,d=e.F},e=>{u=e.u,p=e.a,g=e.s,m=e.R,h=e.r,f=e.E,x=e.b,j=e.M,y=e.c,v=e.d,C=e.e,w=e.f,b=e.g,R=e.h,D=e.i},e=>{A=e.u,k=e.m,L=e.r},e=>{S=e.R},e=>{E=e.u,I=e.L},e=>{T=e.m},e=>{z=e.u}],execute:function(){e("default",(function(){const{isDataLoading:e}=p((e=>e.app));return i.jsxs(R,{children:[e&&i.jsx(D,{isIndeterminate:!0}),i.jsx(M,{}),i.jsxs(d,{flex:1,overflow:"hidden",position:"relative",children:[i.jsx(Y,{}),i.jsx(H,{})]})]})}));var t=function(e){var t=e.children,s=a().colorMode,r=n("RmgAgGrid");return i.jsx(l,{className:"light"===s?"ag-theme-alpine":"ag-theme-alpine-dark",sx:r,children:t})};function M(){const{t:e,i18n:t}=A(),a=E(),n=u(),l=k(),{countryList:o,selectedCountry:c}=p((e=>e.app)),d=o.map((e=>[e.id,a(e.name)])).sort(((e,a)=>e[1].localeCompare(a[1],t.languages[0]))).reduce(((e,t)=>"UN"===t[0]?e:{...e,[t[0]]:t[1]}),{"":e("Please select...")}),x=[{type:"select",label:e("Country/Region"),value:c,options:d,disabledOptions:[""],onChange:e=>n(g(e))}];return i.jsxs(m,{children:[i.jsx(S,{fields:x}),i.jsx(s,{ml:"auto",children:i.jsx(r,{variant:"solid",size:"sm",colorScheme:"primary",onClick:()=>{h.isStandaloneWindow()?l("/new"):h.openApp("rmg-palette-upload"),h.event(f.ADD_CITY,{})},children:e("Add a city")})})]})}function N(e){const{city:t}=e,a=z(t),n=E();return i.jsx(s,{flexWrap:"wrap",sx:{"& .chakra-badge":{mb:1}},children:a.map((e=>i.jsx(x,{name:n(e.name),fg:e.fg||j.white,bg:e.colour},e.id)))})}function Y(){const{t:e,i18n:a}=A(),n=E(),l=y();k();const{cityList:s,selectedCountry:r,sidePanelCity:o}=p((e=>e.app)),c=s.filter((e=>e.country===r)),d=L.useRef(null);L.useEffect((()=>{var e;o||null===(e=d.current)||void 0===e||null===(e=e.api)||void 0===e||e.deselectAll()}),[o]);const u=L.useCallback((({api:e})=>{const t=e.getSelectedRows().map((e=>e.id));1===t.length?l(v(t[0])):l(C())}),[]),g=L.useMemo((()=>[{headerName:e("City"),field:"name",valueFormatter:({value:e})=>n(e),comparator:(e,t)=>n(e).localeCompare(n(t),a.languages[0]),sortable:!0,sort:"asc",wrapText:!0,filter:!0},{headerName:e("Lines"),field:"id",cellRenderer:({value:e})=>i.jsx(N,{city:e}),flex:1,autoHeight:!0,resizable:!1}]),[a.language]),m=L.useMemo((()=>({resizable:!0})),[]);return i.jsx(t,{children:i.jsx(T.AgGridReact,{ref:d,rowData:c,columnDefs:g,defaultColDef:m,getRowId:({data:e})=>e.id,headerHeight:36,rowHeight:36,suppressCellFocus:!0,suppressRowVirtualisation:!0,rowSelection:"single",debug:!1,onSelectionChanged:u})})}const F=410;function H(){var e,t;const{t:a}=A(),n=u(),{sidePanelCity:l,cityList:d}=p((e=>e.app)),g=z(l),m=E()(null!==(e=null===(t=d.find((e=>e.id===l)))||void 0===t?void 0:t.name)&&void 0!==e?e:{});return i.jsxs(w,{isOpen:!!l,width:F,header:"Dummy header",children:[i.jsx(b,{onClose:()=>{n(C())},children:m}),i.jsx(o,{spacing:.5,px:2,flex:1,overflowY:"auto",children:g.map((e=>{var t;const a={...e,nameEntity:Object.entries(e.name),fg:null!==(t=e.fg)&&void 0!==t?t:j.white};return i.jsx(I,{lineDetail:a,editable:!1},e.id)}))}),i.jsx(c,{}),i.jsx(s,{p:1,children:i.jsx(r,{size:"sm",ml:"auto",onClick:async()=>{h.closeApp("rmg-palette-upload"),setTimeout((()=>{h.openApp("rmg-palette-upload","/rmg-palette/#/new?city="+l)}),200),h.event(f.EDIT_CITY,{city:l})},children:a("Edit")})})]})}}}}));
