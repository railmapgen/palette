System.register(["./chakra-legacy-Zux3yh9G.js","./index-legacy-CTf337g-.js","./react-legacy-CCsCkahv.js","./pantone-input-legacy-CUEH9qZF.js","./ag-grid-react-legacy-CD761Nm4.js","./use-palette-legacy-30P3-VGA.js","./line-detail-card-legacy-B0qp9rQO.js","./ag-grid-community-legacy-DFxAsmCD.js"],(function(e,a){"use strict";var t,n,s,i,l,r,c,o,d,u,p,g,m,h,f,x,j,y,C,b,w,v,D,R,A,I,k,L,E,S,T;return{setters:[e=>{t=e.aa,n=e.q,s=e.n,i=e.B,l=e.ad,r=e.p,c=e.ae,o=e.D,d=e.F},e=>{u=e.u,p=e.s,g=e.R,m=e.r,h=e.E,f=e.a,x=e.M,j=e.b,y=e.c,C=e.d,b=e.e,w=e.f,v=e.g,D=e.h},e=>{R=e.n,A=e.u,I=e.a},e=>{k=e.u,L=e.R},e=>{E=e.A},e=>{S=e.u},e=>{T=e.L},null],execute:function(){e("default",(function(){const{isDataLoading:e}=u((e=>e.app));return s.jsxs(v,{children:[e&&s.jsx(D,{isIndeterminate:!0}),s.jsx(z,{}),s.jsxs(d,{flex:1,overflow:"hidden",position:"relative",children:[s.jsx(N,{}),s.jsx(H,{})]})]})}));var a=function(e){var a=e.children,l=t().colorMode,r=n("RmgAgGrid");return s.jsx(i,{className:"light"===l?"ag-theme-alpine":"ag-theme-alpine-dark",sx:r,children:a})};function z(){const{t:e,i18n:a}=R(),t=k(),n=A(),{countryList:i,selectedCountry:c}=u((e=>e.app)),o=i.map((e=>[e.id,t(e.name)])).sort(((e,t)=>e[1].localeCompare(t[1],a.languages[0]))).reduce(((e,a)=>"UN"===a[0]?e:{...e,[a[0]]:a[1]}),{"":e("Please select...")}),d=[{type:"select",label:e("Country/Region"),value:c,options:o,disabledOptions:[""],onChange:e=>n(p(e))}];return s.jsxs(g,{children:[s.jsx(L,{fields:d}),s.jsx(l,{ml:"auto",children:s.jsx(r,{variant:"solid",size:"sm",colorScheme:"primary",onClick:()=>{m.openApp({appId:"rmg-palette-upload"}),m.event(h.ADD_CITY,{})},children:e("Add a city")})})]})}function M(e){const{city:a}=e,t=S(a),n=k();return s.jsx(l,{flexWrap:"wrap",sx:{"& .chakra-badge":{mb:1}},children:t.map((e=>s.jsx(f,{name:n(e.name),fg:e.fg||x.white,bg:e.colour},e.id)))})}function N(){const{t:e,i18n:t}=R(),n=k(),i=j(),{cityList:l,selectedCountry:r,sidePanelCity:c}=u((e=>e.app)),o=l.filter((e=>e.country===r)),d=I.useRef(null);I.useEffect((()=>{c||d.current?.api?.deselectAll()}),[c]);const p=I.useCallback((({api:e})=>{const a=e.getSelectedRows().map((e=>e.id));1===a.length?i(y(a[0])):i(C())}),[]),g=I.useMemo((()=>[{headerName:e("City"),field:"name",valueFormatter:({value:e})=>n(e),comparator:(e,a)=>n(e).localeCompare(n(a),t.languages[0]),sortable:!0,sort:"asc",wrapText:!0,filter:!0},{headerName:e("Lines"),field:"id",cellRenderer:({value:e})=>s.jsx(M,{city:e}),flex:1,autoHeight:!0,resizable:!1}]),[t.language]),m=I.useMemo((()=>({resizable:!0})),[]);return s.jsx(a,{children:s.jsx(E,{ref:d,rowData:o,columnDefs:g,defaultColDef:m,getRowId:({data:e})=>e.id,headerHeight:36,rowHeight:36,suppressCellFocus:!0,suppressRowVirtualisation:!0,rowSelection:"single",debug:!1,onSelectionChanged:p})})}const F=410;function H(){const{t:e}=R(),a=A(),{sidePanelCity:t,cityList:n}=u((e=>e.app)),i=S(t),d=k()(n.find((e=>e.id===t))?.name??{});return s.jsxs(b,{isOpen:!!t,width:F,header:"Dummy header",children:[s.jsx(w,{onClose:()=>{a(C())},children:d}),s.jsx(c,{spacing:.5,px:2,flex:1,overflowY:"auto",children:i.map((e=>{const a={...e,nameEntity:Object.entries(e.name),fg:e.fg??x.white};return s.jsx(T,{lineDetail:a,editable:!1},e.id)}))}),s.jsx(o,{}),s.jsx(l,{p:1,children:s.jsx(r,{size:"sm",ml:"auto",onClick:async()=>{m.closeApp("rmg-palette-upload"),setTimeout((()=>{m.openApp({appId:"rmg-palette-upload",hash:"/new?city="+t})}),200),m.event(h.EDIT_CITY,{city:t})},children:e("Edit")})})]})}}}}));
