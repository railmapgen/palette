System.register(["./chakra-legacy-CBruuMUe.js","./index-legacy-BTO9y9xB.js","./react-legacy-BzHOOJqF.js","./pantone-input-legacy-D986biVu.js","./use-palette-legacy-CZn_-waU.js","./pantone-checker-legacy-3MjVMJ3H.js"],(function(e,n){"use strict";var t,o,a,l,s,i,r,c,d,u,p,m,h,v,g,C,f,x,j,y,b,L,S,E,w,A,I,P,_,k,D,O,F;return{setters:[e=>{t=e.H,o=e.F,a=e.ap,l=e.K,s=e.W,i=e.g,r=e.ac,c=e.D,d=e.aq},e=>{u=e.u,p=e.Z,m=e._,h=e.M,v=e.a,g=e.X,C=e.l,f=e.m,x=e.b,j=e.r,y=e.E,b=e.g,L=e.h,S=e.$,E=e.a0},e=>{w=e.l,A=e.r,I=e.o},e=>{P=e.u,_=e.P,k=e.R,D=e.i},e=>{O=e.u},e=>{F=e.P}],execute:function(){e("default",(function(){const[e]=I(),n=e.get("parentId"),o=e.get("parentComponent"),a=x(),{isDataLoading:l}=u((e=>e.app)),[s,i]=A.useState(),[r,c]=A.useState(),d=A.useRef();return A.useEffect((()=>{const e=new BroadcastChannel(U+n);return d.current=e,j.event(y.APP_CLIP_VIEW_OPENED,{parentComponent:o}),e.onmessage=n=>{const{event:t,data:o}=n.data;console.log(`[${e.name}] Received event from parent component:`,t),"OPEN"===t&&(i(crypto.randomUUID()),c(o))},console.log(`[${e.name}] App clip connection established, parentComponent=${o}`),e.postMessage({event:"LOADED"}),()=>{e.close()}}),[]),t.jsxs(b,{children:[l&&t.jsx(L,{isIndeterminate:!0}),t.jsx(T,{defaultTheme:r,sessionId:s,onSubmit:(e,n)=>{var t,l;console.log(`[${null===(t=d.current)||void 0===t?void 0:t.name}] Emitting SELECT event, theme:`,e),null===(l=d.current)||void 0===l||l.postMessage({event:"SELECT",data:e}),a(S({theme:e,displayName:n})),j.event(y.APP_CLIP_VIEW_SELECT,{parentComponent:o,theme:e})},onClose:()=>{var e,n;console.log(`[${null===(e=d.current)||void 0===e?void 0:e.name}] Emitting CLOSE event`),null===(n=d.current)||void 0===n||n.postMessage({event:"CLOSE"}),j.event(y.APP_CLIP_VIEW_CLOSED,{parentComponent:o})},onClearHistory:()=>{a(E()),j.event(y.CLEAR_HISTORY,{})}})]})}));const n=e=>{const n=(e=>{const n=e.toUpperCase().split("");return 2===n.length?n.map((e=>((e.codePointAt(0)||0)+127397).toString(16).toUpperCase())):5===n.length?["1F3F4",...n.map((e=>((e.codePointAt(0)||0)+917536).toString(16).toUpperCase())),"E007F"]:[]})(e);return String.fromCodePoint(...n.map((e=>parseInt(e,16))))};function V(e){const{defaultValueId:o,onChange:a}=e,{i18n:l}=w(),s=P(),{countryList:i,cityList:r}=u((e=>e.app)),c=o?r.find((e=>e.id===o)):void 0,d=r.slice().map((e=>({...e,value:s(e.name)}))).sort(((e,n)=>"other"===e.id?1:"other"===n.id?-1:e.value.localeCompare(n.value,l.languages[0])));return t.jsx(p,{data:d,displayHandler:e=>t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"flag-emoji",children:n(m(e.country))}),t.jsx("span",{children:s(e.name)})]}),filter:(e,n)=>{var t,o;const a=e.toLocaleLowerCase();return n.id.toLocaleLowerCase().includes(a)||Object.values(n.name).some((e=>e.toLocaleLowerCase().includes(a)))||n.country.toLocaleLowerCase().includes(a)||Object.values(null!==(t=null===(o=i.find((e=>n.country===e.id)))||void 0===o?void 0:o.name)&&void 0!==t?t:{}).some((e=>e.toLocaleLowerCase().includes(a)))},value:c&&s(c.name),onChange:e=>null==a?void 0:a(e.id)})}const $={display:"inline-block",overflow:"hidden",textOverflow:"ellipsis"};function R(e){const{city:n,defaultValueId:o,onChange:a,onSubmit:l}=e,s=P(),i=O(n),r=o?i.find((e=>e.id===o)):void 0,c=i.map((e=>({...e,value:s(e.name)})));return t.jsx(p,{data:c,displayHandler:e=>t.jsx(v,{name:s(e.name),fg:e.fg||h.white,bg:e.colour,title:s(e.name),sx:$}),filter:(e,n)=>{const t=e.toLocaleLowerCase();return n.id.toLocaleLowerCase().includes(t)||Object.values(n.name).some((e=>e.toLocaleLowerCase().includes(t)))},value:r&&s(r.name),onChange:e=>null==a?void 0:a(e.id,e.colour,e.fg||h.white,e.pantone),InputPropsByState:e=>({onKeyDown:({key:n})=>!e&&"Enter"===n&&(null==l?void 0:l())})})}const z=e=>!!e.match(/^#[0-9a-fA-F]{6}$/),H={flexDirection:"column",flex:1,mx:2,overflowX:"hidden",overflowY:"auto","& .chakra-badge":{fontSize:"1em",width:"fit-content",alignSelf:"center",m:1},"& > section:first-of-type":{p:1},"& > section:last-of-type":{w:"100%","& > div:last-of-type":{px:2},"& .rmg-section__header button":{ml:"auto"}}};function T(e){const{defaultTheme:n,sessionId:p,onSubmit:m,onClose:x,onClearHistory:j}=e,{t:y}=w(),{recentlyUsed:b,pantoneReady:L}=u((e=>e.app)),[S,E]=A.useState(null==n?void 0:n[0]),[I,P]=A.useState(null==n?void 0:n[1]),[O,$]=A.useState((null==n?void 0:n[2])||"#AAAAAA"),[T,U]=A.useState((null==n?void 0:n[3])||h.white),[B,N]=A.useState(""),[W,M]=A.useState("color"),K=()=>{N(""),M((e=>"pantone"===e?"color":e))};A.useEffect((()=>{p&&n&&(E(n[0]),P(n[1]),$(n[2]),U(n[3]),K())}),[p,null==n?void 0:n.toString()]);const X=[{label:y("Select"),value:"color"},{label:y("RGB"),value:"text"},{label:y("Pantone®"),value:"pantone",disabled:!L}],Y=[{label:y("Black"),value:h.black},{label:y("White"),value:h.white}],q=S&&I&&O&&T&&z(O),G=()=>{if(q){const e=`${S} - ${I}`,n=O.toLowerCase();null==m||m([S,I,n,T],e)}},Z=[{type:"custom",label:y("City"),component:t.jsx(V,{defaultValueId:S,onChange:e=>{E(e),P(void 0),$("#AAAAAA"),U(h.white)}})},{type:"custom",label:y("Line"),component:t.jsx(R,{city:S,defaultValueId:I,onChange:(e,n,t,o)=>{P(e),$(n),U(t),o&&N(o)},onSubmit:G})}],J=[{type:"custom",label:y("Input mode"),component:t.jsx(g,{selections:X,defaultValue:W,onChange:e=>M(e)})},{type:"custom",label:y("Pantone® code"),component:t.jsx(_,{value:B,onChange:(e,n)=>{E("other"),P("other"),$(n),N(e)}}),hidden:"pantone"!==W},{type:"input",label:y("Background colour"),variant:"pantone"===W?"color":W,value:O,placeholder:"#F3D03E",validator:z,onChange:e=>{E("other"),P("other"),$(e),K()},isDisabled:"pantone"===W},{type:"custom",label:y("Foreground colour"),component:t.jsx(g,{selections:Y,defaultValue:T,onChange:e=>{E("other"),P("other"),U(e)}})}];return t.jsxs(t.Fragment,{children:[t.jsxs(o,{sx:H,children:[t.jsx(v,{name:y("Example"),fg:T,bg:O}),t.jsxs(C,{children:[t.jsx(F,{hidden:!0}),t.jsx(k,{fields:Z}),t.jsx(k,{fields:J})]}),t.jsxs("section",{children:[t.jsxs(f,{children:[t.jsx(a,{as:"h5",size:"xs",children:y("Recently used")}),t.jsx(l,{variant:"ghost",size:"xs",onClick:j,children:y("Clear")})]}),t.jsx(s,{children:b.map((({theme:e,displayName:n})=>t.jsx(i,{children:t.jsx(r,{size:"xs","aria-label":y("Apply"),title:n,mt:"0.45px",color:e[3],bg:e[2],icon:t.jsx(D,{}),onClick:()=>(e=>{E(e[0]),P(e[1]),$(e[2]),U(e[3]),K()})(e)})},e.join("-"))))})]})]}),t.jsx(c,{}),t.jsxs(d,{p:2,justifyContent:"flex-end",children:[t.jsx(l,{size:"sm",onClick:x,children:y("Cancel")}),t.jsx(l,{size:"sm",colorScheme:"primary",onClick:G,isDisabled:!q,children:y("Confirm")})]})]})}const U="rmg-palette-bridge--"}}}));
