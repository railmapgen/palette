System.register(["./chakra-legacy-BOtnEfeP.js","./index-legacy-CqcOVVUu.js","./react-legacy-CIVklJVK.js","./pantone-input-legacy-2kMIkcXt.js","./use-palette-legacy-B3qPNqbt.js","./pantone-checker-legacy-DGov2PFC.js"],(function(e,t){"use strict";var n,o,a,s,l,i,c,r,d,u,p,m,h,x,g,C,f,j,v,y,b,L,S,E,A,w,I,P,k,_,D,O,R,F,V,$;return{setters:[e=>{n=e.j,o=e.ac,a=e.p,s=e.h,l=e.W,i=e.o,c=e.$,r=e.F,d=e.D,u=e.ad},e=>{p=e.u,m=e.Z,h=e._,x=e.M,g=e.a,C=e.b,f=e.m,j=e.$,v=e.r,y=e.E,b=e.a0,L=e.X,S=e.l,E=e.g,A=e.h,w=e.a1},e=>{I=e.n,P=e.a,k=e.q},e=>{_=e.u,D=e.i,O=e.e,R=e.P,F=e.R},e=>{V=e.u},e=>{$=e.P}],execute:function(){e("default",(function(){const[e]=k(),t=e.get("parentId"),o=e.get("parentComponent"),a=C(),{isDataLoading:s}=p((e=>e.app)),[l,i]=P.useState(),[c,r]=P.useState(),d=P.useRef();return P.useEffect((()=>{const e=new BroadcastChannel(H+t);return d.current=e,v.event(y.APP_CLIP_VIEW_OPENED,{parentComponent:o}),e.onmessage=t=>{const{event:n,data:o}=t.data;console.log(`[${e.name}] Received event from parent component:`,n),"OPEN"===n&&(i(crypto.randomUUID()),r(o))},console.log(`[${e.name}] App clip connection established, parentComponent=${o}`),e.postMessage({event:"LOADED"}),()=>{e.close()}}),[]),n.jsxs(E,{children:[s&&n.jsx(A,{isIndeterminate:!0}),n.jsx(W,{defaultTheme:c,sessionId:l,onSubmit:(e,t)=>{console.log(`[${d.current?.name}] Emitting SELECT event, theme:`,e),d.current?.postMessage({event:"SELECT",data:e}),a(w({theme:e,displayName:t})),v.event(y.APP_CLIP_VIEW_SELECT,{parentComponent:o,theme:e})},onClose:()=>{console.log(`[${d.current?.name}] Emitting CLOSE event`),d.current?.postMessage({event:"CLOSE"}),v.event(y.APP_CLIP_VIEW_CLOSED,{parentComponent:o})}})]})}));const t=e=>{const t=(e=>{const t=e.toUpperCase().split("");return 2===t.length?t.map((e=>((e.codePointAt(0)||0)+127397).toString(16).toUpperCase())):5===t.length?["1F3F4",...t.map((e=>((e.codePointAt(0)||0)+917536).toString(16).toUpperCase())),"E007F"]:[]})(e);return String.fromCodePoint(...t.map((e=>parseInt(e,16))))};function z(e){const{defaultValueId:o,onChange:a}=e,{i18n:s}=I(),l=_(),{countryList:i,cityList:c}=p((e=>e.app)),r=o?c.find((e=>e.id===o)):void 0,d=c.slice().map((e=>({...e,value:l(e.name)}))).sort(((e,t)=>"other"===e.id?1:"other"===t.id?-1:e.value.localeCompare(t.value,s.languages[0])));return n.jsx(m,{data:d,displayHandler:e=>n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"flag-emoji",children:t(h(e.country))}),n.jsx("span",{children:l(e.name)})]}),filter:(e,t)=>{const n=e.toLocaleLowerCase();return t.id.toLocaleLowerCase().includes(n)||Object.values(t.name).some((e=>e.toLocaleLowerCase().includes(n)))||t.country.toLocaleLowerCase().includes(n)||Object.values(i.find((e=>t.country===e.id))?.name??{}).some((e=>e.toLocaleLowerCase().includes(n)))},value:r&&l(r.name),onChange:e=>a?.(e.id)})}const T={display:"inline-block",overflow:"hidden",textOverflow:"ellipsis"};function M(e){const{city:t,defaultValueId:o,onChange:a,onSubmit:s}=e,l=_(),i=V(t),c=o?i.find((e=>e.id===o)):void 0,r=i.map((e=>({...e,value:l(e.name)})));return n.jsx(m,{data:r,displayHandler:e=>n.jsx(g,{name:l(e.name),fg:e.fg||x.white,bg:e.colour,title:l(e.name),sx:T}),filter:(e,t)=>{const n=e.toLocaleLowerCase();return t.id.toLocaleLowerCase().includes(n)||Object.values(t.name).some((e=>e.toLocaleLowerCase().includes(n)))},value:c&&l(c.name),onChange:e=>a?.(e.id,e.colour,e.fg||x.white,e.pantone),InputPropsByState:e=>({onKeyDown:({key:t})=>!e&&"Enter"===t&&s?.()})})}function U({onApply:e}){const{t:t}=I(),r=C(),{recentlyUsed:d}=p((e=>e.app)),[u,m]=P.useState(!1);return n.jsxs("section",{children:[n.jsxs(f,{children:[n.jsx(o,{as:"h5",size:"xs",children:t("Recently used")}),u?n.jsxs(n.Fragment,{children:[n.jsx(a,{variant:"ghost",size:"xs",onClick:()=>{r(b()),v.event(y.CLEAR_HISTORY,{})},children:t("Clear all")}),n.jsx(a,{colorScheme:"primary",size:"xs",onClick:()=>m(!1),sx:{ml:"1 !important"},children:t("Done")})]}):n.jsx(a,{variant:"ghost",size:"xs",onClick:()=>m(!0),children:t("Clear")})]}),n.jsx(s,{children:d.map((({theme:o,displayName:a},s)=>n.jsx(l,{children:n.jsxs(i,{size:"xs",isAttached:!0,children:[n.jsx(c,{size:"xs","aria-label":t("Apply")+" "+a,title:a,mt:"0.45px",color:o[3],bg:o[2],icon:n.jsx(D,{}),onClick:()=>e(o)}),u&&n.jsx(c,{variant:"outline","aria-label":t("Remove")+" "+a,title:t("Remove")+" "+a,mt:"0.45px",icon:n.jsx(O,{}),onClick:()=>(r(j(s)),void v.event(y.REMOVE_HISTORY_ITEM,{}))})]})},o.join("-"))))})]})}const B=e=>!!e.match(/^#[0-9a-fA-F]{6}$/),N={flexDirection:"column",flex:1,mx:2,overflowX:"hidden",overflowY:"auto","& .chakra-badge":{fontSize:"1em",width:"fit-content",alignSelf:"center",m:1},"& > section:first-of-type":{p:1},"& > section:last-of-type":{w:"100%","& > div:last-of-type":{px:2},"& .rmg-section__header button":{ml:"auto"}}};function W(e){const{defaultTheme:t,sessionId:o,onSubmit:s,onClose:l}=e,{t:i}=I(),{pantoneReady:c}=p((e=>e.app)),[m,h]=P.useState(t?.[0]),[C,f]=P.useState(t?.[1]),[j,v]=P.useState(t?.[2]||"#AAAAAA"),[y,b]=P.useState(t?.[3]||x.white),[E,A]=P.useState(""),[w,k]=P.useState("color"),_=()=>{A(""),k((e=>"pantone"===e?"color":e))};P.useEffect((()=>{o&&t&&(h(t[0]),f(t[1]),v(t[2]),b(t[3]),_())}),[o,t?.toString()]);const D=[{label:i("Select"),value:"color"},{label:i("RGB"),value:"text"},{label:i("Pantone®"),value:"pantone",disabled:!c}],O=[{label:i("Black"),value:x.black},{label:i("White"),value:x.white}],V=m&&C&&j&&y&&B(j),T=()=>{if(V){const e=`${m} - ${C}`,t=j.toLowerCase();s?.([m,C,t,y],e)}},W=[{type:"custom",label:i("City"),component:n.jsx(z,{defaultValueId:m,onChange:e=>{h(e),f(void 0),v("#AAAAAA"),b(x.white)}})},{type:"custom",label:i("Line"),component:n.jsx(M,{city:m,defaultValueId:C,onChange:(e,t,n,o)=>{f(e),v(t),b(n),o&&A(o)},onSubmit:T})}],H=[{type:"custom",label:i("Input mode"),component:n.jsx(L,{selections:D,defaultValue:w,onChange:e=>k(e)})},{type:"custom",label:i("Pantone® code"),component:n.jsx(R,{value:E,onChange:(e,t)=>{h("other"),f("other"),v(t),A(e)}}),hidden:"pantone"!==w},{type:"input",label:i("Background colour"),variant:"pantone"===w?"color":w,value:j,placeholder:"#F3D03E",validator:B,onChange:e=>{h("other"),f("other"),v(e),_()},isDisabled:"pantone"===w},{type:"custom",label:i("Foreground colour"),component:n.jsx(L,{selections:O,defaultValue:y,onChange:e=>{h("other"),f("other"),b(e)}})}];return n.jsxs(n.Fragment,{children:[n.jsxs(r,{sx:N,children:[n.jsx(g,{name:i("Example"),fg:y,bg:j}),n.jsxs(S,{children:[n.jsx($,{hidden:!0}),n.jsx(F,{fields:W}),n.jsx(F,{fields:H})]}),n.jsx(U,{onApply:e=>{h(e[0]),f(e[1]),v(e[2]),b(e[3]),_()}})]}),n.jsx(d,{}),n.jsxs(u,{p:2,justifyContent:"flex-end",children:[n.jsx(a,{size:"sm",onClick:l,children:i("Cancel")}),n.jsx(a,{size:"sm",colorScheme:"primary",onClick:T,isDisabled:!V,children:i("Confirm")})]})]})}const H="rmg-palette-bridge--"}}}));
